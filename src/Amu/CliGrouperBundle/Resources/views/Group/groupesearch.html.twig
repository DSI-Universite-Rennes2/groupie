{% extends 'AppBundle::page.html.twig' %}

{% block titre %}Recherche de groupe{% endblock %}

{% block body %}

{% if app.session.flashbag.has('flash-notice') %}
<center>
    <div class="ui-state-highlight ui-button ui-corner-all" onclick="$(this).remove();" style="min-width:600px;padding:15px;margin:10px;">
    {% for flashMessage in app.session.flashbag.get('flash-notice') %}
        <p>{{ flashMessage }}</p>
    {% endfor %}
    </div>
</center>
{% endif %}

{% if app.session.flashbag.has('flash-error') %}
<center>
    <div class="ui-state-error ui-button ui-corner-all" onclick="$(this).remove();" style="min-width:600px;padding:15px;margin:10px;margin:auto;">
    {% for flashMessage in app.session.flashbag.get('flash-error') %}
        <p>{{ flashMessage }}</p>
    {% endfor %}
    </div>
</center>
{% endif %}    

<form class="amuForms" id="_ajxFromModifier">
    {{ form_widget(form) }}
    <br>
    <p>
     <button type="button" class="ui-button ui-widget-content ui-corner-all" style="padding:5px;"  
	onclick="loadPage('{{ path('group_search', { 'opt': opt, 'uid' : uid }) }}', $('#_ajxFromModifier').serializeArray());"><img align="absmiddle" src="{{asset('bundles/app/images/ico/16/search-3.png')}}" />&nbsp;Rechercher&nbsp;</button>
     <button type="button" class="ui-button ui-widget-content ui-corner-all" style="padding:5px;" onclick="loadPage('{{ path('accueil') }}');" ><img align="absmiddle" src="{{asset('bundles/app/images/ico/16/cancel.png')}}" />&nbsp;Annuler&nbsp;</button>
     <span class="record_actions"></span>
    </p>
</form>

     <br>
{% if opt=='add' %}    
    <button type="button" class="ui-button ui-widget-content ui-corner-all" style="padding:5px;"  
        onclick="loadPage('{{path('user_display') }}', $('#_ajxFromModifier').serializeArray());"><img align="absmiddle" src="{{ asset('bundles/app/images/ico/32/prev-green.png') }}" />&nbsp;Retour Ã  la liste&nbsp;
    </button>
{% endif %}


<script type="text/javascript">       
$('#groupsearch_cn').autocomplete({
    source : function(requete, reponse){
            var motcle = $('#groupsearch_cn').val();                       
            var DATA = 'motcle=' + motcle;
            
            $.ajax({
                    type:"POST",
                    url : "{{ path('ajax_groupcompletlist') }}",
                    dataType : 'json',
                    data : DATA, 

                    success : function(donnee){
                        reponse($.map(donnee, function(object){ 
                            return object;
                        }));
                    }            
                });
            }
}); 
    
</script>

{% endblock %}