{% extends 'AppBundle::page.html.twig' %}

{% block titre %}Utilisateur{% endblock %}

{% block body %}
    
    {% if app.session.has('_saved') and app.session.get('_saved', 0) == 1 %}
        <div style="display: none;"> {{ app.session.remove('_saved') }} </div>
        <script language="JavaScript" type="text/javascript">
        $(function() {
            loadPage('{{ path('usersearch') }}');
        });
        </script>

    {% else %}

        <table class="ui-widget-content dataTable TabInfos" filter="25">
            <thead>
                <tr>
                <th>uid</th>
                <th>DisplayName</th>
                <th>Mail</th>
                <th>Tel</th>
                <th>Groupes</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                    <tr > 
                        <td style="vertical-align: middle;">{{user.uid}}</td>
                        <td style="vertical-align: middle;">{{user.displayname}}</td>
                        <td style="vertical-align: middle;"> <a href="mailto:{{user.mail}}"> {{user.mail}}</td>
                        <td style="vertical-align: middle;">{{user.tel}}</td>
                        <td style="vertical-align: middle;">
                            <table>
                                {% for group in user.memberof %}
                                    <tr><td style="vertical-align: middle;">{{group}} </td></tr>
                                {% endfor %}    
                            </table>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
   
    {% endif %}
   
{% endblock %}
